{"version":3,"sources":["index.tsx"],"names":["API","axios","create","baseURL","Input","_ref","title","value","change","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","onChange","event","target","InputForm","_ref2","fields","submit","onSubmit","preventDefault","map","field","Object","assign","key","PeopleListing","_ref3","people","remove","_ref4","name","number","_id","onClick","Error","_ref5","type","message","className","toLowerCase","ReactDOM","render","_useState","useState","_useState2","_home_konstaku_School_FS_part2_phonebook_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_4__","filter","changeFilter","_useState3","_useState4","setPeople","_useState5","_useState6","newName","changeNewName","_useState7","_useState8","newPhone","changeNewPhone","_useState9","_useState10","notification","changeNotification","fetchPeople","_ref6","_home_konstaku_School_FS_part2_phonebook_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","_home_konstaku_School_FS_part2_phonebook_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","mark","_callee","res","wrap","_context","prev","next","get","sent","data","stop","apply","this","arguments","useEffect","notify","setTimeout","_ref7","_callee2","newUser","user","_context2","some","_ref8","post","concat","_home_konstaku_School_FS_part2_phonebook_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","window","confirm","_home_konstaku_School_FS_part2_phonebook_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","find","p","put","t0","console","log","_ref9","_callee3","id","_context3","delete","_x","show","_ref10","includes","document","getElementById"],"mappings":"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","file":"static/js/main.6ddd8bbd.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport axios from 'axios'\n\nconst API_URL = '/api/persons'\nconst API = axios.create({\n    baseURL: API_URL\n})\n\ninterface Person {\n    name: string\n    number: string\n    _id: string\n}\n\ninterface InputProps {\n    title: string\n    value: string\n    change: (value: string) => void\n}\n\ninterface Notification {\n    type: 'Error' | 'Success'\n    message: string\n}\n\nconst Input = ({title, value, change}: InputProps) => \n    <p>{title} <input value={value} onChange={(event) => change(event.target.value)} /></p>\n\nconst InputForm = ({fields, submit}: {fields: InputProps[], submit: () => void}) => \n    <div>\n        <form onSubmit={event => {\n            event.preventDefault()\n            submit()\n        }}>\n            <h3>add a new</h3>\n            {fields.map(field => <Input key={field.title} {...field} />)}\n            <button>\n                Create\n            </button>\n        </form>\n    </div>\n\nconst PeopleListing = ({people, remove}: {people: Person[], remove: (_id: string) => void}) => \n    <div>\n        <h3>Numbers</h3>\n        {people.map(({name, number, _id}) => <p key={_id}>{name} {number} <button onClick={() => remove(_id)}>delete</button></p>)}\n    </div>\n\nconst Error = ({type, message}: Notification) => {\n    return <p className={type.toLowerCase()}>{message}</p>\n}\n\nconst App = () => {\n    const [filter, changeFilter] = useState('')\n    const [people, setPeople] = useState<Array<Person>>([])\n    const [newName, changeNewName] = useState('')\n    const [newPhone, changeNewPhone] = useState('')\n    const [notification, changeNotification] = useState({message: '', type: 'Success'} as Notification)\n\n    const fetchPeople = async () => {\n        const res = await API.get('/')\n        setPeople(res.data as Person[])\n    }\n\n    useEffect(() => {\n        fetchPeople()\n    }, [])\n\n    const createInputs = (): InputProps[] => {\n        return [\n            {\n                title: 'name :',\n                value: newName,\n                change: changeNewName\n            },\n            {\n                title: 'phone :',\n                value: newPhone,\n                change: changeNewPhone\n            },\n        ]\n    }\n\n    const notify = (type: 'Error' | 'Success', message: string) => {\n        changeNotification({type, message})\n        setTimeout(() => changeNotification({type: 'Success', message: ''}), 5000)\n    }\n\n    const create = async () => {\n        if (!people.some(({name}) => name === newName)) {\n            const newUser = (await API.post('/', {name: newName, number: newPhone})).data as Person\n            setPeople([...people, newUser])\n            changeNewName('')\n            changeNewPhone('')\n            notify('Success', `Created user ${newUser.name}`)\n        } else {\n            if (window.confirm(`${newName} already in the phonebook, do you want to update the number?`)) {\n                const user = {...people.find(p => p.name === newName), number: newPhone} as Person\n                try {\n                    await API.put(`${user && user._id}`, user)\n                    setPeople(people.map(p => p._id !== user._id ? p : user))\n                    changeNewName('')\n                    changeNewPhone('')\n                    notify('Success', `Updated user ${user.name}`)\n                } catch (e) {\n                    console.log(e)\n                    changeNotification({type: 'Error', message: `Failed to update ${user.name}, maybe they have been removed?`})\n                    setTimeout(() => changeNotification({type: 'Success', message: ''}), 5000)\n                }\n            }\n        }\n    }\n\n    const remove = async (id: string) => {\n        const user = people.find((p) => p._id === id)\n        if (window.confirm(`Do you want to remove ${user && user.name} for sure?`)) {\n            try {\n                await API.delete(`/${id}`)\n                setPeople(people.filter(p => p._id !== id))\n                notify('Success', `Deleted user ${user && user.name}`)\n            } catch (e) {\n                console.log(e)\n                notify('Error', `Failed to delete user ${user && user.name}`)\n            }\n        }\n    }\n\n    const show = filter ?  \n                    people.filter(({name, number}) => name.toLowerCase().includes(filter.toLowerCase()) || number.toLowerCase().includes(filter.toLowerCase()))\n                    : people\n\n    return <div>\n        {notification.message && <Error {...notification} />}\n        <h1>Phonebook</h1>\n        <Input title={'filter shown with'} value={filter} change={(value) => changeFilter(value)} />\n        <InputForm \n            fields={createInputs()}\n            submit={create}\n        />\n        <PeopleListing people={show} remove={remove} />\n    </div>\n\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}