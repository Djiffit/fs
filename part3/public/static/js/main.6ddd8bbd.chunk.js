(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(19)},19:function(e,t,n){"use strict";n.r(t);var a=n(17),r=n(16),c=n(2),u=n.n(c),o=n(4),s=n(3),i=n(0),l=n.n(i),m=n(14),f=n.n(m),p=(n(26),n(15)),d=n.n(p).a.create({baseURL:"/api/persons"}),b=function(e){var t=e.title,n=e.value,a=e.change;return l.a.createElement("p",null,t," ",l.a.createElement("input",{value:n,onChange:function(e){return a(e.target.value)}}))},v=function(e){var t=e.fields,n=e.submit;return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n()}},l.a.createElement("h3",null,"add a new"),t.map(function(e){return l.a.createElement(b,Object.assign({key:e.title},e))}),l.a.createElement("button",null,"Create")))},h=function(e){var t=e.people,n=e.remove;return l.a.createElement("div",null,l.a.createElement("h3",null,"Numbers"),t.map(function(e){var t=e.name,a=e.number,r=e._id;return l.a.createElement("p",{key:r},t," ",a," ",l.a.createElement("button",{onClick:function(){return n(r)}},"delete"))}))},w=function(e){var t=e.type,n=e.message;return l.a.createElement("p",{className:t.toLowerCase()},n)};f.a.render(l.a.createElement(function(){var e=Object(i.useState)(""),t=Object(s.a)(e,2),n=t[0],c=t[1],m=Object(i.useState)([]),f=Object(s.a)(m,2),p=f[0],E=f[1],g=Object(i.useState)(""),j=Object(s.a)(g,2),y=j[0],O=j[1],k=Object(i.useState)(""),x=Object(s.a)(k,2),S=x[0],C=x[1],L=Object(i.useState)({message:"",type:"Success"}),_=Object(s.a)(L,2),D=_[0],F=_[1],J=function(){var e=Object(o.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.get("/");case 2:t=e.sent,E(t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)(function(){J()},[]);var N=function(e,t){F({type:e,message:t}),setTimeout(function(){return F({type:"Success",message:""})},5e3)},T=function(){var e=Object(o.a)(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(p.some(function(e){return e.name===y})){e.next=10;break}return e.next=3,d.post("/",{name:y,number:S});case 3:t=e.sent.data,E([].concat(Object(r.a)(p),[t])),O(""),C(""),N("Success","Created user ".concat(t.name)),e.next=26;break;case 10:if(!window.confirm("".concat(y," already in the phonebook, do you want to update the number?"))){e.next=26;break}return n=Object(a.a)({},p.find(function(e){return e.name===y}),{number:S}),e.prev=12,e.next=15,d.put("".concat(n&&n._id),n);case 15:E(p.map(function(e){return e._id!==n._id?e:n})),O(""),C(""),N("Success","Updated user ".concat(n.name)),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(12),console.log(e.t0),F({type:"Error",message:"Failed to update ".concat(n.name,", maybe they have been removed?")}),setTimeout(function(){return F({type:"Success",message:""})},5e3);case 26:case"end":return e.stop()}},e,null,[[12,21]])}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(o.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.find(function(e){return e._id===t}),!window.confirm("Do you want to remove ".concat(n&&n.name," for sure?"))){e.next=13;break}return e.prev=2,e.next=5,d.delete("/".concat(t));case 5:E(p.filter(function(e){return e._id!==t})),N("Success","Deleted user ".concat(n&&n.name)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),N("Error","Failed to delete user ".concat(n&&n.name));case 13:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),B=n?p.filter(function(e){var t=e.name,a=e.number;return t.toLowerCase().includes(n.toLowerCase())||a.toLowerCase().includes(n.toLowerCase())}):p;return l.a.createElement("div",null,D.message&&l.a.createElement(w,D),l.a.createElement("h1",null,"Phonebook"),l.a.createElement(b,{title:"filter shown with",value:n,change:function(e){return c(e)}}),l.a.createElement(v,{fields:[{title:"name :",value:y,change:O},{title:"phone :",value:S,change:C}],submit:T}),l.a.createElement(h,{people:B,remove:U}))},null),document.getElementById("root"))},26:function(e,t,n){}},[[18,1,2]]]);
//# sourceMappingURL=main.6ddd8bbd.chunk.js.map